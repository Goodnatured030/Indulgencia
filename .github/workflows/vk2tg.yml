name: VK ‚Üí Telegram

on:
  workflow_dispatch:
  schedule:
    - cron: '*/5 * * * *'

permissions:
  contents: write     # –¥–∞—ë–º –ø—Ä–∞–≤–∞ runner‚Äô—É –¥–ª—è –ø—É—à–∞

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
    - name: üîΩ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      uses: actions/checkout@v3
      with:
        persist-credentials: true

    - name: üîß –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: |
        pip install vk_api
        pip install python-telegram-bot==13.15

    - name: ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
      env:
        VK_TOKEN: ${{ secrets.VK_TOKEN }}
        TG_TOKEN: ${{ secrets.TG_TOKEN }}
        CHAT_ID: ${{ secrets.CHAT_ID }}
      run: python main.py
